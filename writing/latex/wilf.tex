\chapter[Wilf-Classification]{Wilf-equivalences under dominating  patterns}

One question often asked in the field of permutation patterns is that
of Wilf-equivalence. Two patterns \(\pi\) and \(\sigma\) are said to be
Wilf-equivalent if their avoidance sets have the same size at each
length. More formally:

\begin{definition}[Wilf-equivalence]
    Two patterns \(\pi\) and \(\sigma\) are said to be \emph{Wilf-equivalent}
    if for all \(k_{} \ge 0\), \(\size{\av[k]{\pi}} = \size{\av[k]{\sigma}}\).
    Two sets of permutation patterns \(R\) and \(S\) are are
    \emph{Wilf-equivalent} if for all \(k_{} \ge 0\),
    \(\size{\av[k]{R}} = \size{\av[k]{S}}\).
\end{definition}

Wilf-equivalence is of interest since if two permutation classes are enumerated
in the same way then there should exist a bijection between them, and therefore
any other combinatorial object that they represent.

Coincident pattern classes are also Wilf-equivalent. This is due to the fact that
if \(\av[k]{S} = \av[k]{R}\) then obviously \(\size{\av[k]{R}} = \size{\av[k]{S}}\).
Coincidence is therefore a stronger equivalence condition than Wilf-equivalence.

There are a number of symmetries we can use when examining Wilf-equivalences
to reduce the amount of work. It can be easily seen that the reverse, complement
and inverse operations (see \FigureRef{fig:symm}) preserve enumeration, and therefore these classes are trivially
Wilf-equivalent.
\begin{figure}[!htb]
\begin{align*}
    \rev{\textpattern{}{2,3,1}{}} &= \textpattern{}{1,3,2}{}\\
    \com{\textpattern{}{2,3,1}{}} &= \textpattern{}{2,1,3}{}\\
    \inv{\textpattern{}{2,3,1}{}} &= \textpattern{}{3,1,2}{}
\end{align*}
\caption{The operations reverse, complement and inverse for the pattern 231}
\label{fig:symm}
\end{figure}

The group of symmetries on permutations is isomorphic to the dihedral group
of order \(8\), the group of symmetries of a square. \emph{Reverse-inverse} and
\emph{reverse} correspond to generators of the dihedral group.

Since we are always considering Wilf-equivalences in the set \(\av{S}\) we
must only use these symmetries when they preserve the dominating pattern, if we
were to allow other symmetries, then the equivalences calculated in the previous
section do not necessarily hold.

Throughout this section we will consider Wilf-equivalences of patterns
whilst avoiding the \emph{dominating pattern} \(\perm{2,3,1}\). We will
use \(\mathcal{C}\) to denote \(\av{\perm{2,3,1}}\) and \(C(x)\) will
be the usual Catalan generating function satisfying \(C(x) = 1 + C(x)^2\).
This is easy to see by structural decomposition around the maximum, as
shown in \FigureRef{fig:decompmax}.

\begin{figure}[!ht]
    \centering
    \decompmax{0/1,1/0}{A}{}{}{B}
    \caption{Structural decomposition of a non-empty avoider of 231}
    \label{fig:decompmax}
\end{figure}

The elements to the left of the maximum, \(A\), have the structure of a \(231\)
avoiding permutation, and the elements to the right of the maximum, \(B\), have the
structure of a \(\perm{2,3,1}\) avoiding permutation. Furthermore, all the
elements in \(A\) lie below all of the elements in \(B\). We call \(A\) the
\emph{lower-left section} and \(B\) the \emph{upper-right section}.

We can also decompose a permutation avoiding \(\perm{2,3,1}\) around the leftmost
point, giving a similar figure.

\section{Wilf-classes with patterns of length 1.}
When considering the mesh patterns of length \(2\) it will be useful to know
the Wilf-equivalence classes of the mesh patterns of length \(1\) inside
\(\av{\perm{2,3,1}}\), this means that we are considering the set \(\av{231,p}\)
where \(p\) is a mesh-pattern of length 1.

The patterns in the following set are coincident,
\begin{equation*}
    \left\{
        \begin{array}{c}
        \textpattern{}{1}{},
        \textpattern{}{1}{0/0},
        \textpattern{}{1}{1/0},
        \textpattern{}{1}{0/0,1/0},
        \textpattern{}{1}{0/1},\\
        \textpattern{}{1}{0/0,0/1},
        \textpattern{}{1}{1/1},
        \textpattern{}{1}{1/0,1/1},
        \textpattern{}{1}{0/1,1/1}
    \end{array}
    \right\}
\end{equation*}
due to the fact that every permutation, except the empty
permutation, must contain an occurrence of all of these patterns.

The pattern \(\textpattern{}{1}{0/0,1/0,0/1,1/1}\) is in its own
Wilf-class since the only permutation containing this pattern is
the permutation \(\perm{1}\). The avoiders of this pattern therefore
have generating function \(\var(x) = C(x)-x\).

\nextvar
The pattern \(p = \textpattern{}{1}{0/1,1/0}\) is one of the
quadrant marked mesh patterns studied by \textcite{2012arXiv1201.6243K}.
Alternatively we can enumerate
avoiders of \(p\) by decomposing a non-empty avoider of \(p\) around the maximum element
in order to give the following structural decomposition.
\begin{equation*}
    \scriptvar = \varepsilon \sqcup \decompmax{0/1,1/0}{\scriptvar}{}{}{\mathcal{C}\setminus\varepsilon}
\end{equation*}
If the upper-right section was empty the maximum would create an
occurrence of the pattern, however no points in this section can create
an occurrence since the maximum lies in a region corresponding to the
shading in \(p\), so we can use any avoider of \(\perm{2,3,1}\). The lower-left section however can create occurrences
of \(p\) and therefore must also avoid \(p\), as well as \(\perm{2,3,1}\).
This gives the generating function of avoiders to be the function \(\var(x)\)
satisfying.
\begin{align*}
    \var(x) &= 1 + x\var(x)(C(x)-1) \\
    \shortintertext{Solving for \(\var\) gives}
    \var(x) &= \frac{1}{1+x-xC(x)}\\
    \var(x) &= \frac{C(x)}{1+xC(x)}
\end{align*}

Calculating coefficients given by this generating function gives the Fine numbers.
\begin{equation*}
    1, 0, 1, 2, 6, 18, 57, 186, 622, 2120, 7338,\dotsc \tag{\href{https://oeis.org/A000957}{OEIS: A000957}}
\end{equation*}


\nextvar[\varfine]
It can be shown by use of \PropositionRef{prop:dom2} that the patterns
\textpattern{}{1}{0/0,1/1} and \(q_1 = \textpattern{}{1}{0/0,0/1,1/1}\) are
coincident. Consider the decomposition of a non-empty avoider of \(q_1\) in
\(\av{\perm{2,3,1}}\) around the maximum:
\begin{equation*}
    \scriptvar_1 =\varepsilon \sqcup \decompmax{0/1,1/0}{\mathcal{C}\setminus\varepsilon}{}{}{\mathcal{C}}
\end{equation*}
This can be explained succinctly by the fact that a permutation containing
\(q_1\) starts with it's maximum, by not allowing the lower-left section of the
\(\perm{2,3,1}\) avoider to be empty we prevent an occurrence from ever happening.

Consider \(q_2 = \textpattern{}{1}{0/1,1/0,1/1}\), avoiding this pattern
means that a permutation does not end with it's maximum. We can perform a similar
decomposition as before to get
\begin{equation*}
    \mathcal{\var}_2 =\varepsilon \sqcup \decompmax{0/1,1/0}{\mathcal{C}}{}{}{\mathcal{C}\setminus\varepsilon}
\end{equation*}

Now consider \(q_3 = \textpattern{}{1}{0/0,0/1,1/0}\), the avoiders of this
pattern are permutations that do not start with their minimum. In this case we
perform the decomposition around the leftmost element
\begin{equation*}
    \mathcal{\var}_3 =\varepsilon \sqcup \decompleft{0/1,1/0}{\mathcal{C}\setminus\varepsilon}{}{}{\mathcal{C}}
\end{equation*}
All of these classes have the same generating function, namely
\begin{equation}
    \var(x) = 1 + xC(x)(C(x)-1). \label{eqn:maxlgen}
\end{equation}
The coefficients of this generating function are
\begin{equation*}
    1, 0, 1, 3, 9, 28, 90, 297, 1001, 3432, 11934,\dotsc \tag{\href{https://oeis.org/A000245}{OEIS: A000245} with offset \(1\)}
\end{equation*}

\nextvar[\varmaxl]
There is one pattern of length \(1\) still to consider. The pattern
\(r = \textpattern{}{1}{0/0,1/0,1/1}\) is avoided by all permutations
that do not end in their minimum. Considering the standard decomposition
of a \(\perm{2,3,1}\) avoider around the maximum we can see that an avoider
of \(r\) must fit into precisely one of the following two forms.
\begin{equation*}
    \scriptvar = \varepsilon \sqcup
    \underbrace{\decompmax{0/1,1/0}{\mathcal{C}\setminus\varepsilon}{}{}{\mathcal{C}}}_\text{
        Minimum comes before the maximum.
    } \sqcup
    \underbrace{\decompmax{0/0,0/1,1/0}{}{}{}{\scriptstyle{\scriptvar\setminus\varepsilon}}}_\text{
        Minimum is after the maximum, minimum cannot be last.
    }
\end{equation*}
Therefore this particular class has generating function \(\var(x)\) satisfying
\begin{equation*}
    \var(x) = 1 + xC(x)(C(x)-1) + x(\var(x)-1)
\end{equation*}
Computing coefficients of this generating function gives
\begin{equation*}
    	1, 0, 1, 4, 13, 41, 131, 428, 1429, 4861, 16795,\dotsc \tag{\href{https://oeis.org/A141364}{OEIS: A141364}}
\end{equation*}

\section{Wilf-classes with patterns of length 2}
By use of the set equivalences from \ChapterRef{chap:coincs} we know there are
at most \(95\) Wilf-equivalence classes.

In order to consider symmetries we must only take the symmetries that preserve
the pattern \(\perm{2,3,1}\). The only symmetry that preserves the pattern
\(\perm{2,3,1}\) is \emph{reverse-complement-inverse}. Using this
symmetry to reduces the number of Wilf-classes gives us \(61\) classes of trivial
Wilf-equivalences, these Wilf-equivalences are explained by patterns being either
coincident, or being the reverse-complement-inverse of a pattern.

Computing avoiders up to length \(10\) suggest that there are at least \(23\)
Wilf-classes, of which \(13\) are non-trivial.

When considering explanations of Wilf-equivalences we consider how the
permutations correspond to set-partitions.

\begin{note}
    \label{not:setequiv}
    The avoiders of the pattern \(q = \mperm{2,3,1}{\{(1,0),(1,1),(1,2),(1,3)\}}\),
    \textpattern{}{2,3,1}{1/0,1/1,1/2,1/3},
    in \(\mathfrak{S}_n\) are in one-to-one correspondence with partitions of
    \(\nrange{n}\). (\textcite[Prop.~2]{DBLP:journals/ejc/Claesson01})
\end{note}
\begin{proof}
    Let \(\pi\) be a permutation in \(\av[n]{q}\)
    in one-line notation and insert a dash between each ascent in \(\pi\). This
    corresponds to set partitions where the blocks are the elements between the
    dashes, the blocks are listed in increasing order of their least element,
    with the elements written in each block in descending order.
\end{proof}

\begin{example}
    Given the permutation \(\pi = \perm{5,4,2,1,3,9,6,8,7}\) this corresponds to the
    partition \(\{\{5,4,2,1\},\{3\},\{9,6\},\{8,7\}\}\).
\end{example}

We call the least element in each block the \emph{block bottom}.

We are looking at permutations in \(\av{\perm{2,3,1}}\), all of these permutations
also avoid the mesh pattern in \NoteRef{not:setequiv}, \ie
\(\av{\perm{2,3,1}} \subset \av{q}\).

The classes containing the following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    \pattern{}{1,2}{} \text{ and }
    \pattern{}{2,1}{}
\end{equation*}
This is true since the only avoiders of these patterns are the decreasing
sequence and the increasing sequence respectively, and both of these
avoid \(\perm{2,3,1}\) in all cases. There is therefore \(1\) avoider at
every length.

\nextvar[\varminl]
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    m_1 = \pattern{}{1,2}{0/0,0/1,0/2,
                    1/0,1/1,1/2,
                    2/0,2/1,2/2}
    \text{ and }
    m_2 = \pattern{}{2,1}{0/0,0/1,0/2,
                    1/0,1/1,1/2,
                    2/0,2/1,2/2}
\end{equation*}
It is obvious that these two are Wilf-equivalent since the only
permutations that contain these patterns are \(\perm{1,2}\) and
\(\perm{2,1}\) respectively, therefore the avoiders of these patterns
are counted by the Catalan numbers at all lengths except for length
\(2\) where there is precisely \(1\) avoider.
Therefore the generating function is
\begin{equation*}
  \var(x) = C(x)-x^2
\end{equation*}

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    \pattern{}{1,2}{0/0,0/1,0/2,1/0,1/2,2/0,2/1,2/2},
    \pattern{}{1,2}{1/1,0/1,0/2,1/0,1/2,2/0,2/1,2/2},
    \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/2,1/1,2/1,2/2},
    \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/2,2/0,1/1,2/2},
    \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/2,2/0,2/1,1/1},
    \pattern{}{2,1}{0/0,0/1,0/2,1/1,1/2,2/0,2/1,2/2}
\end{equation*}
Consider containers of these patterns.
For each of these patterns there is precisely one occurrence
in any permutation containing the pattern. Now consider
the points in the region corresponding to the unshaded box in each case. Each
must contain an avoider of \(\perm{2,3,1}\) that is of length
\(n-2\). Therefore these classes are all Wilf-equivalent
and the number of length \(n\) avoiders is
\begin{equation*}
    \var_n = C_n - C_{n-2}
\end{equation*}
for \(n \ge 2\) where \(C_n\) is the \(n\)th Catalan number, the number of
\(\perm{2,3,1}\) avoiders of length \(n\). This gives the sequence
\begin{equation*}
    1, 1, 1, 4, 12, 37, 118, 387, 1298, 4433, 15366,\dotsc \tag{\(C_n - \)\href{https://oeis.org/A001453}{A001453} offset 2}
\end{equation*}

\subsection{}
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/2,2/0,2/1,2/2},
    \pattern{}{1,2}{0/0,1/1,0/2,1/0,1/2,2/0,2/1,2/2},
    \pattern{}{1,2}{0/0,0/1,1/1,1/0,1/2,2/0,2/1,2/2}
\end{equation*}
Consider containers of these patterns.
Each of these patterns again occurs precisely once in
any containing permutation. However this time when considering
the region corresponding to the unshaded box we need to take into consideration
\LemmaRef{lem:incdec}
and so the empty box can only contain a decreasing subsequence. There
is precisely one decreasing subsequence at every length, and so there
is exactly one container of each pattern at each length. The three
patterns are Wilf-equivalent and have \(C_n - 1\) avoiders of
length \(n\) for all \(n \ge 2\).
This gives the sequence
\begin{equation*}
    1, 1, 1, 4, 13, 41, 131, 428, 1429, 4861, 16795,\dotsc\tag{\href{https://oeis.org/A001453}{OEIS: A001453} offset 2}
\end{equation*}

\subsection{}
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    \pattern{}{1,2}{0/0,0/1,0/2,1/1,2/0,2/1,2/2}
    \pattern{}{2,1}{0/0,0/1,1/0,1/1,1/2,2/0,2/2}
    \pattern{}{1,2}{0/0,0/1,1/1,1/2,2/0,2/1,2/2}
    \pattern{}{1,2}{0/1,0/2,1/0,1/1,2/0,2/1,2/2}
    \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/2,2/0,2/1}
    \pattern{}{1,2}{0/0,0/1,1/0,1/2,2/0,2/1,2/2}
\end{equation*}
The containers of the patterns
have exactly one occurrence.
Once again we consider the regions corresponding to the unshaded regions, For each
pattern,
except the first the two, these regions are independent, and one contains
any avoider of \(\perm{2,3,1}\) and the other must contain a
decreasing sequence by \LemmaRef{lem:incdec}.
Let us consider the first pattern separately. In order to
avoid \(\perm{2,3,1}\) across the regions corresponding to the unshaded boxes
we can add some additional restrictions, \ie all elements in the top region must
be to the right of all elements in the bottom region.
\begin{equation}
    \raisebox{0.6ex}{
    \begin{tikzpicture}[scale=1, baseline=(current bounding box.center)]
        \fill[pattern=north east lines, pattern color=black!75] (1.5, 0) rectangle +(0.5,1);
        \fill[pattern=north east lines, pattern color=black!75] (1.0, 2) rectangle +(0.5,1);
        \draw (1.5,0) -- (1.5,1)
              (1.5,2) -- (1.5,3);
        \modpattern[2]{}{1,2}{0/0,0/1,0/2,1/1,2/0,2/1,2/2}
    \end{tikzpicture}
    }
    \label{eqn:splitboxes}
\end{equation}
Now we can see that the region corresponding to the top free box must contain a decreasing sequence,
and the bottom must contain an avoider of \(\perm{2,3,1}\) and these
two do not interact in any manner. The containers of this pattern are counted
the same as the other patterns, and due to this they are Wilf-equivalent in \(\av{231}\).
The containers
have generating function \(x^2C(x)/(1-x)\). Enumerating avoiders
therefore gives us
\begin{equation*}
    1, 1, 1, 3, 10, 33, 109, 364, 1233, 4236, 14740,\dotsc \tag{\(C_n -\) \href{https://oeis.org/A014137}{A014137} offset 2}
\end{equation*}

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    m_1 = \pattern{}{1,2}{0/0,0/2,
                    1/0,1/1,
                    2/0,2/1,2/2}
    \text{ and }
    m_2 = \pattern{}{1,2}{0/0,
                    1/0,1/1,1/2,
                    2/0,2/1,2/2}
\end{equation*}
In this case it is better to consider the containers of the patterns
instead of the avoiders due to the amount of shadings in the mesh.

We look at the containers of the pattern \(m_1\), there can only ever
be one occurrence of this pattern in a permutation corresponding to
the last point in the permutation and the minimum. Consider an occurrence of \(m_1\),
the points in the two regions corresponding to the the two boxes must form decreasing
subsequences.
For a permutation of length \(k\) if we fix the number of points in
one of the boxes the number of points in the other box is determined.
Therefore we can have any number of points from \(\setrange{0}{k-2}\)
in the bottom box. Therefore there are \(k-1\) containers of
length \(k\). These permutations correspond to set partitions of \(k\)
points into exactly two non-overlapping parts, such that the first part
is the decreasing sequence from the first element to the minumum, and
the second part is the elements in the sequence from the maximum to the last
element.
%partitioned by the first element and the minimum.

Now consider the containers of \(m_2\). We know that the unshaded region
must contain a decreasing subsequence, with the point corresponding to
the \(1\) in the mesh pattern. This decreasing subsequence has \(k-1\)
points. We can put the point corresponding to the \(2\) above any of these
points and therefore there are \(k-1\) containers of length \(k\).

Therefore these two patterns have been shown to have the same number of
avoiders of length \(k\) for all \(k\) and are Wilf-equivalent.
The number of avoiders of length \(k\) is given by
\begin{equation*}
  \var_k = C_k - (k-1), \var_0 = 1
\end{equation*}
and have enumeration
\begin{equation*}
    1, 1, 1, 3, 11, 38, 127, 423, 1423, 4854, 16787,\dotsc \tag{\(C_n -\) \href{https://oeis.org/A000027}{A000027} offset 2}
\end{equation*}

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{gather}
    m_1 = \pattern{}{1,2}{0/0,0/1,1/1,1/2,2/0,2/1},
    m_2 = \pattern{}{2,1}{0/0,0/1,1/1,1/2,2/0,2/1}, \label{eq:singleud}\\
    m_3 = \pattern{}{2,1}{0/1,0/2,1/0,1/1,1/2,2/1}, \text{ and }
    m_4 = \pattern{}{2,1}{0/1,0/2,1/0,1/1,1/2,2/0} \label{eq:other}
\end{gather}

First we prove the Wilf-equivalence between \(m_1\) and \(m_2\) shown in
\eqref{eq:singleud}. The easiest way to
show that these are equinumerous is to consider the containers as set partitions.

Considering an occurrence of either of these patterns in a permutation  we know
the following about the points corresponding to the points in the patterns.
\begin{itemize}
    \item The point corresponding to the first point in both patterns
        must lie in the first block of the set partition (there are
        no points southwest from it in the permutation).
    \item The point corresponding to the second point in both patterns
        is a block bottom (there are no points southeast of it in
        the permutation).
    \item If the region corresponding to box \((2,2)\) in an occurrence of
    \(m_1\) is empty, then the point corresponding to the second point is
    precisely the last block bottom. If the region corresponding to box \((0,1)\)
    in an occurrence of \(m_2\) is empty, then the point corresponding to the
    second point is precisely the first block bottom.
    If these regions are non-empty then the block containing the point
    corresponding to the second point in both patterns contains only the point
    (it is a singleton block).
\end{itemize}
This tells us that an occurrence of the patterns must happen when there
is a singleton block occurring after the first block. The difference
between the patterns is in the underlying classical pattern. This
means that permutations containing \(m_1\) correspond to set partitions
with a singleton block with value one higher than some element in the
block containing \(1\). The permutations containing \(m_2\) correspond
to the set partitions containing a block with block bottom having value
one lower than some element in the block containing \(1\) and if this
block is not the block containing \(1\) then it is a singleton block. This
proves that the containers of both of these patterns in \(\av{231}\) are
equinumerous, and therefore so are their avoiders.

Consider an avoider of \(\perm{2,3,1}\) and \(m_3\). We can perform
the decomposition around the maximum
\begin{equation*}
    \scriptvar_1 = \varepsilon \sqcup
    \decompmax{1/0,0/1}{\scriptvar_1}{}{}{\mathcal{\varmaxl}_1}
\end{equation*}
Only the first point in the top right region can
create an occurrence of \(m_3\) if and only if it is the
element with largest value in this region, therefore the partial permutation
in this region must avoid starting with the maximum.

Looking at avoiders of \(\perm{2,3,1}\) and \(m_4\) we
can perform a similar decomposition around the maximum to get
\begin{equation*}
    \scriptvar_2 = \varepsilon \sqcup
    \decompmax{1/0,0/1}{\scriptvar_2}{}{}{\mathcal{\varmaxl}_3}
\end{equation*}
Any occurrence of \(m_4\) can never occur in the
top right region. It could only occur between the maximum and the first point
in the region, if and only if this first point is the lowest valued element in
this region.
Since both \(\mathcal{\varmaxl}_1\) and \(\mathcal{\varmaxl}_3\) have the same
enumeration, \(\scriptvar_1\) and \(\scriptvar_2\) must also have
the same enumeration and are therefore Wilf-equivalent.

Now we must consolidate these two subclasses. In order to do this we must
consider the decomposition around the leftmost point of a permutation in
\(\av{\perm{2,3,1},m_1}\). We have the following
\begin{equation*}
    \scriptvar_3 = \varepsilon \sqcup
    \decompleft{1/0,0/1}{\scriptvar_3}{}{}{\mathcal{\varmaxl}_3}
\end{equation*}
It is therefore obvious that avoiders of \(m_1\) and avoiders of \(m_4\)
have the same enumeration, and therefore all four patterns are Wilf-equivalent
in \(\av{\perm{2,3,1}}\) with generating function satisfying
\begin{equation*}
    \var(x) = 1 + x\var(x)\varmaxl(x)
\end{equation*}
Where \(\varmaxl(x)\) is the generating function given in \EquationRef{eqn:maxlgen}.
This can be enumerated to give the sequence
\begin{equation*}
    1, 1, 1, 2, 6, 19, 61, 200, 670, 2286, 7918,\dotsc \tag{\href{https://oeis.org/A035929}{OEIS: A035929} offset 1}
\end{equation*}

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    m_1 = \pattern{}{2,1}{0/0,0/1,0/2,
                    1/1,1/2,
                    2/0,2/2}
    \text{ and }
    m_2 = \pattern{}{1,2}{0/1,0/2,
                    1/0,1/2,
                    2/0,2/1,2/2}
\end{equation*}

First consider the structure of an avoider of \(m_1\) in \(\av{\perm{2,3,1}}\).
We can perform the usual structural decomposition of an avoider
of \(\perm{2,3,1}\) where we consider decomposition around the maximum.
% Any permutation in \(\av{\perm{2,3,1},m_1}\) is in the following set
% precisely once.
If \(\scriptvar_1\) is the set \(\av{\perm{2,3,1},m_1}\) then any permutation in
\(\scriptvar_1\) either starts with a maximum or does not, giving us the
decomposition
\begin{equation*}
    \scriptvar_1 = \varepsilon \sqcup
    \decompmax{0/1,1/0}{\mathcal{C}\setminus\varepsilon}{}{}{\mathcal{C}} \sqcup
    \decompmax{0/1,1/0,0/0}{}{}{}{\mathcal{\varfine}}
\end{equation*}
Where \(\mathcal{\varfine} = \av{231,\textpattern{}{1}{0/1,1/0}}\).
Now consider the decomposition around the maximum of a permutation in
\(\scriptvar_2 = \av{\perm{2,3,1},m_2}\), the permutation either ends with
the maximum, or it does not, so we get
\begin{equation*}
    \scriptvar_2 = \varepsilon \sqcup
    \decompmax{0/1,1/0}{\mathcal{C}}{}{}{\mathcal{C}\setminus\varepsilon} \sqcup
    \decompmax{0/1,1/0,1/1}{\mathcal{\varfine}}{}{}{}
\end{equation*}
Therefore both of these sets of avoiders are enumerated in the same manner
having generating function satisfying
\begin{equation*}
    \var(x) = 1 + xC(x)(C(x)-1) + x\varfine(x)
\end{equation*}
This generating function gives
\begin{equation*}
    1, 1, 1, 4, 11, 34, 108, 354, 1187, 4054, 14054,\dotsc \tag{\(C_n - \)\href{https://oeis.org/A000958}{A000958} offset 2}
\end{equation*}


\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
    \begin{gather*}
        m_1 = \pattern{}{1,2}{0/0,0/1,1/1,1/2,2/0,2/2},
        m_2 = \pattern{}{1,2}{0/0,0/1,1/0,2/0,2/1,2/2}, \\
        m_3 = \pattern{}{1,2}{0/2,1/0,1/1,2/0,2/1,2/2}, \text{ and }
        m_4 = \pattern{}{1,2}{0/1,1/0,1/1,2/0,2/1,2/2}
    \end{gather*}

First consider the decomposition of avoiders of \(m_1\) in \(\av{\perm{2,3,1}}\)
around the maximum. We have different conditions if we start with the maximum or not.
\begin{equation*}
    \scriptvar_1 =
    \varepsilon \sqcup
    \decompmax{0/1,1/0}{\scriptstyle \mathcal{\varmaxl}_1\setminus\varepsilon}{}{}{\mathcal{C}}
    \sqcup
    \decompmax{0/0,0/1,1/0}{}{}{}{\scriptvar_1}
\end{equation*}
Where \(\mathcal{\varmaxl}_1 = \av{231,\textpattern{}{1}{0/0,0/1,1/1}}\).
Now we decompose the avoiders of \(m_2\) around the leftmost point, we have similar
conditions for starting with the maximum
\begin{equation*}
    \scriptvar_2 =
    \varepsilon \sqcup
    \decompleft{0/1,1/0}{\mathcal{C}\setminus\varepsilon}{}{}{\mathcal{C}\setminus\varepsilon}
    \sqcup
    \decompleft{0/1,1/0,1/1}{\scriptvar_2}{}{}{}
\end{equation*}
This gives us two generating functions satisfying the following pair of equations
\begin{align}
    \var_1(x) &= 1 + xC(x)(\varmaxl(x)-1) +x\var_1(x) \label{eqn:genL1}\\
    \text{ and }\var_2(x) &= 1 + x(C(x)-1)^2 + x\var_2(x) \label{eqn:genL2}
\end{align}
In order for these two functions to give the same value it is necessary to show that
\eqref{eqn:genL1} and \eqref{eqn:genL2} are equal, this occurs if
\(C(x)(\varmaxl(x)-1) = (C(x)-1)^2\).
\begin{align*}
    &&(C(x)-1)^2 &= C(x)(\varmaxl(x)-1)\\
        &\Leftrightarrow& x^2C^4(x) &=  xC(x)(C(x)-1)C(x) &&\text{By definition of \(\varmaxl\) and \(C\)}\\
        &\Leftrightarrow& x^2C^4(x)&=xC^3(x)-xC^2(x)\\
        &\Leftrightarrow& xC^2(x) &= C(x) -1 &&\text{Divide by \(xC^2(x)\)}\\
        &\Leftrightarrow& C(x) &= 1 +xC^2(x)
\end{align*}
The final line is always satisfied since it is the form of \(C(x)\), and
therefore the two generating functions are equal.

Now we look at the other patterns. In particular note that any container of these
patterns can contain the pattern precisely once, \(m_2\) specifies the
minimum and last point, \(m_3\) and \(m_4\) both use the last point and the
previous block bottom (in the set partition context).

Consider an occurrence of \(m_3\) in \(\av{\perm{2,3,1}}\)
\begin{equation*}
    \raisebox{0.6ex}{
        \begin{tikzpicture}[scale=1, baseline=(current bounding box.center)]
            \modpattern[2]{}{1,2}{0/2,1/0,1/1,2/0,2/1,2/2}
            \draw (0.5,0.5) node {\(b_1\)};
            \draw (0.5,1.5) node {\(b_2\)};
            \draw (1.5,2.5) node {\(b_3\)};
        \end{tikzpicture}
    }
\end{equation*}
The regions \(b_2\) and \(b_3\) must contain a decreasing sequence by
\LemmaRef{lem:incdec}. The box labelled \(b_1\) must contain an avoider
of \(\perm{2,3,1}\). However note that the points in this box can have
interaction with any points in box \(b_2\). If there is a point
in \(b_2\) then any points in \(b_1\) to the left of this point must
be lower than any points to the right of this point. By extension,
if \(b_2\) contains a decreasing sequence with \(k\) points, there
are \(k+1\) non-interacting avoiders of \(\perm{2,3,1}\) in \(b_1\).

Now in \(m_2\) and \(m_4\) containers we can use the same method as in
\eqref{eqn:splitboxes} to separate the two decreasing sequences in the
free regions in the top row, and the mixing happens in the same manner
as in a container of \(m_3\).
We now have that \(m_2,m_3\) and \(m_4\) have the same number of containers
so are Wilf-equivalent, and that \(m_1\) and \(m_2\) have the same generating
function so all four classes are Wilf-equivalent.

Evaluating the generating function \(\var(x)\) gives us the enumeration
\begin{equation*}
    1, 1, 1, 2, 6, 20, 68, 233, 805, 2807, 9879,\dotsc\tag{\(C_n - \) \href{https://oeis.org/A014138}{A014138} offset 1}
\end{equation*}

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    \pattern{}{1,2}{0/0,0/2,1/0,1/2,2/0,2/2},
    \pattern{}{1,2}{1/1,2/1,1/0,1/2,2/0,2/2},
    \pattern{}{1,2}{0/1,1/0,1/2,2/0,2/2},
    \pattern{}{1,2}{0/1,0/2,1/1,1/2,2/0}, \text{ and }
    \pattern{}{1,2}{0/0,0/1,0/2,1/0,1/1,1/2}
\end{equation*}

If \(\scriptvar_1\) is the set of avoiders of
\textpattern{}{1,2}{0/0,0/2,1/0,1/2,2/0,2/2}, then by the structural
decomposition around the maximum we have
\begin{equation*}
    \scriptvar_1 = \varepsilon \sqcup
    \decompmax{0/0,0/1,1/0}{}{}{}{\mathcal{C}}
\end{equation*}
The lower-left section is empty because the minimum must occur after the maximum.
These are counted by \(\var(x) = 1+xC(x)\)
% This is because \(\scriptvar_1\) is the set of permutations
% who have their minimum occur after their maximum.

% If \(\mathcal{M}_2\) is the set of avoiders of
% \textpattern{}{1,2}{1/1,2/1,1/0,1/2,2/0,2/2}, then by structural
% decomposition around the maximum we have
% \begin{equation*}
%     \mathcal{M}_2 = \varepsilon \sqcup
%     \decompmax{0/1,1/0}{\mathcal{C}}{}{}{\scriptstyle\mathcal{M}_1\setminus\varepsilon}
%     \sqcup \tikz{\filldraw (0,0) circle (3pt);}
% \end{equation*}
% Alternatively,
The pattern \textpattern{}{1,2}{1/1,2/1,1/0,1/2,2/0,2/2} occurs if
the last element is higher than the penultimate element. This can only occur
if the last element is in a single block in the set partition context. In order
to construct an avoider of length \(n\) we can take any avoider of
\(\perm{2,3,1}\) of length \(n-1\) and insert the new maximum into the last
block.  This ensures that the last block is never a singleton. This means
that these permutations are also counted by \(\var(x)\).

Considering the last pattern, the only way we can construct an
avoider is to take any \(\perm{2,3,1}\) avoider and add a new minimum
at the start of the permutation. Adding a new leftmost point with any other
value would either create an occurrence of \(\perm{2,3,1}\) or the mesh pattern.
Therefore these permutations are also counted by \(\var(x) = 1+xC(x)\).

The avoiders of the third pattern can be decomposed by the maximum
to give
\begin{equation*}
    \scriptvar_3 = \varepsilon \sqcup
    \decompmax{0/1,1/0}{\mathcal{\varfine}}{}{}{\scriptvar_3}
\end{equation*}
Where \(\mathcal{\varfine} = \av{(231,\textpattern{}{1}{0/1,1/0})}\).
The generating function derived satisfies \(\var_3(x) = 1 + x\varfine(x)\var_3(x)\).
The fourth pattern can be decomposed around the maximum in a similar
manner.
\begin{equation*}
    \scriptvar_4 = \varepsilon \sqcup
    \decompmax{0/1,1/0}{\scriptvar_4}{}{}{\mathcal{\varfine}}
\end{equation*}

So clearly \(\var_4(x) = \var_3(x)\).
We need to show that the generating function \(\var_3(x)\) is the same as \(\var(x)\)
\begin{equation*}
    \begin{aligned}
        \var_3(x) &= 1 + x\varfine(x)\var_3(x) \\
        &= \frac{1}{1-x\varfine(x)} && \text{Solving for \(\var_3(x)\)}\\
        &= \frac{1}{1 - \frac{xC}{1+xC(x)}} &&\text{Substituting for \(\varfine(x)\)}\\
        &= \frac{1+xC(x)}{1+xC(x)-xC(x)}\\
        &= 1+xC(x)
    \end{aligned}
\end{equation*}
We have that \(\var_3(x) = 1+xC(x)= \var(x) \) so all four patterns are Wilf-equivalent
 and have enumeration sequence
 \begin{equation*}
     1, 1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862,\dotsc \tag{\href{https://oeis.org/A000108}{OEIS: A000108} offset 1}
 \end{equation*}
 This is an offset of the Catalan numbers.

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{gather*}
        m_1 = \pattern{}{1,2}{0/0,0/1,1/0,1/2,2/1},
        m_2 = \pattern{}{2,1}{0/0,0/1,0/2,1/1,1/2,2/0},\\
        m_3 = \pattern{}{1,2}{0/1,0/2,1/0,1/2,2/0,2/2}, \text{ and }
        m_4 = \pattern{}{2,1}{1/0,1/1,2/1,2/2}\\
\end{gather*}
 First we consider an occurrence of \(m_2\) in a
permutation in \(\av{\perm{2,3,1}}\)
\begin{equation*}
    \raisebox{0.6ex}{
    \begin{tikzpicture}[scale=1, baseline=(current bounding box.center)]
        \fill[pattern=north east lines, pattern color=black!75] (2.5, 1) rectangle +(0.5,1);
        \fill[pattern=north east lines, pattern color=black!75] (2.0, 2) rectangle +(0.5,1);
        \draw (2.5,1) -- (2.5,3);
        \draw (1.5,0.5) node {\(b_1\)};
        \draw (2.25,1.5) node {\(\scriptstyle b_2\)};
        \draw (2.75,2.5) node {\(\scriptstyle b_3\)};
        \modpattern[2]{}{2,1}{0/0,0/1,0/2,1/1,1/2,2/0}
    \end{tikzpicture}
    }
\end{equation*}
We can choose the lowest occurrence of \(m_2\) in the sense that the region
corresponding to \(b_1\) must avoid the pattern \(\textpattern{}{1}{0/1,1/0}\)
as well as \(\perm{2,3,1}\). The regions corresponding to \(b_2\) and \(b_3\) must
now contain avoiders of \(\perm{2,3,1}\), all points in the region corresponding
to \(b_2\) must be to the left of those in the region corresponding to \(b_3\) since
we are in
\(\av{\perm{2,3,1}}\). Since we already have an occurrence of
\(m_2\) we do not need to care about creating more occurrences so there are no
other conditions on these boxes.

Now looking at an occurrence of \(m_3\) in \(\pi \in \av{\perm{2,3,1}}\)
\begin{equation*}
    \raisebox{0.6ex}{
    \begin{tikzpicture}[scale=1, baseline=(current bounding box.center)]
        \fill[pattern=north east lines, pattern color=black!75] (1, 1.5) rectangle +(1,0.5);
        \fill[pattern=north east lines, pattern color=black!75] (2, 1) rectangle +(1,0.5);
        \draw (1,1.5) -- (3,1.5);
        \draw (0.5,0.5) node {\(b_1\)};
        \draw (1.5,1.25) node {\(\scriptstyle b_2\)};
        \draw (2.5,1.75) node {\(\scriptstyle b_3\)};
        \modpattern[2]{}{1,2}{0/1,0/2,1/0,1/2,2/0,2/2}
    \end{tikzpicture}
    }
\end{equation*}
We consider the leftmost occurrence of \(m_3\) in the sense that the region
corresponding
to \(b_1\) must avoid the pattern \(\textpattern{}{1}{0/1,1/0}\) as well as
\(\perm{2,3,1}\) once more. The regions corresponding to \(b_2\) and \(b_3\)
must avoid \(\perm{2,3,1}\) and as in a container of \(m_2\) the points in the
region corresponding to the box containing \(b_2\) must be lower in value than
all of those in the region corresponding to the box containing \(b_3\), as doing
so would lead to an occurrence of \(\perm{2,3,1}\).
Therefore both of these sets of containers are enumerated in the same way.

Now we find a structural decomposition for an avoider of \(m_2\).
Decomposing around the maximum we see the set of avoiders of \(m_2\)
have the form
\begin{equation*}
    \scriptvar_2 = \varepsilon \sqcup
    \decompmax{0/1,1/0}{\scriptstyle\scriptvar_2\setminus\varepsilon}{}{}{\mathcal{C}}
    \sqcup
    \decompmax{0/0,0/1,1/0}{}{}{}{\mathcal{\varfine}}
\end{equation*}
We can decompose an avoider of \(m_1\) in \(\av{\perm{2,3,1}}\) around the leftmost point
in a similar manner:
\begin{equation*}
    \scriptvar_1 = \varepsilon \sqcup
    \decompleft{0/1,1/0}{\scriptstyle\scriptvar_1\setminus\varepsilon}{}{}{\mathcal{C}}
    \sqcup
    \decompleft{0/0,0/1,1/0}{}{}{}{\mathcal{\varfine}}
\end{equation*}
These two decompositions tell us that these two patterns are Wilf-equivalent
and have generating function
\begin{equation}
    \var_1 = 1 + x(\var_1(x)-1)C(x) +x\varfine(x)
    \label{eqn:ngen}
\end{equation}
Now consider an avoider of \(m_4\) decomposed around the maximum\nextvar %subvar
\begin{equation*}
    \mathcal{\lastvar}_4 = \varepsilon \sqcup
    \decompmax{0/1,1/0}{\mathcal{C}}{}{}{\scriptvar}
\end{equation*}
Here \(\scriptvar\) is the permutations avoiding \(\perm{2,3,1},m_4\) and
\(p = \textpattern{}{1}{0/0,0/1,1/1}\), since if the subsequence in this box
were to start with the maximum then this point and the maximum would create
an occurrence of \(m_4\).
Now consider decomposition of a permutation in \(\scriptvar\) around its
leftmost point.
\begin{equation*}
    \scriptvar = \varepsilon \sqcup
    \decompleft{0/1,1/0}{\mathcal{C}}{}{}{\scriptstyle\mathcal{\lastvar}_4\setminus\varepsilon}
\end{equation*}
This gives us the generating function
\begin{equation*}
    \var(x) = 1 + xC(x)(\lastvar_4(x)-1)
\end{equation*}
Now we get the following for \(\lastvar_4\)
\begin{equation}
    \lastvar_4(x) = 1 +xC(x)(xC(x)(\lastvar_4(x)-1)+1)
    \label{eqn:ngen2}
\end{equation}

All that remains to show Wilf-equivalence is to show that \EquationRef{eqn:ngen} and
\EquationRef{eqn:ngen2} are the same generating function.
First solve \EquationRef{eqn:ngen2} for \(\lastvar_4(x)\)
\begin{equation}
    \begin{aligned}
        \lastvar_4(x) &= 1+xC(x)(xC(x)(\lastvar_4(x)-1)+1)\\
        &= 1 + x^2C^2(x)\lastvar_4(x) -x^2C^2(x) +xC(x)\\
        &= 1 + \frac{xC(x)}{1 - x^2C^2(x)}\\
        &= 1 + \frac{xC(x)}{(1-xC(x))(1+xC(x))} && \text{Difference of squares}\\
        \lastvar_4(x)&= 1 + \frac{xC^2(x)}{1+xC(x)} && C(x) = \frac{1}{1-xC(x)}
    \end{aligned}
\end{equation}

Now we solve \EquationRef{eqn:ngen} for \(\lastvar_1(x)\)
\begin{equation}
    \begin{aligned}
        \lastvar_1(x)&= 1+x(\lastvar_1(x)-1)C(x)+x\varfine(x)\\
        &= 1+x\lastvar_1(x)C(x)-xC(x)+x\varfine(x)\\
        \lastvar_1(x)&= 1+xC(x)\varfine(x)\\
        \lastvar_1(x) &= 1 + \frac{xC^2(x)}{1+xC(x)} &&\text{Substitution of \(\varfine(x)\)}
        % &= 1 +\frac{x}{x^2C^2(x) - (x^2+2x)C(x) +x+1}\\
        % &= 1 + \frac{x}{1-x^2C(x)-xC(x)} && xC^2(x) = C(x)-1\\
        % &= 1 + \frac{xC^2(x)}{C^2(x) - xC^3(x)(x+1)}\\
        % &= 1 + \frac{xC^2(x)}{C(x) - xC^2(x) + xC(x)} && xC^2(x) = C(x)-1\\
        % \lastvar_1(x)&= 1 + \frac{xC^2(x)}{1+xC(x)} && C(x) = 1+xC^2(x)\\
    \end{aligned}
\end{equation}
We have shown that \(\lastvar_1\) and \(\lastvar_4\) are indeed the same generating function,
and we have that the classes containing these four patterns are Wilf-equivalent.
Evaluating the generating function \(\lastvar(x)\) gives
\begin{equation*}
    1, 1, 1, 3, 8, 24, 75, 243, 808, 2742, 9458,\dotsc \tag{\href{https://oeis.org/A001453}{OEIS: A001453}}
\end{equation*}

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{equation*}
    m_1 = \pattern{}{1,2}{1/0,1/1,1/2,2/0,2/1} \text{ and }
    m_2 = \pattern{}{2,1}{0/1,1/0,1/1,1/2,2/1}
\end{equation*}
Let \(\scriptvar_1\) be the set of avoiders of \(m_1\) in \(\av{231}\). By structural decomposition
around the leftmost point we have
\begin{equation*}
    \scriptvar_1 = \varepsilon \sqcup
    \decompleft{0/1,1/0}{\scriptvar_1}{}{}{\scriptvar^\prime_1}
\end{equation*}
Where \(\scriptvar^\prime_1\) is a permutation avoiding \(\perm{2,3,1}, m_1\)
and \(\textpattern{}{1}{0/0,0/1,1/0}\).
Now consider the decomposition of a permutation in \(\scriptvar^\prime_1\). It can
once again be decomposed around the leftmost point
\begin{equation*}
    \scriptvar^\prime_1 = \varepsilon \sqcup
    \decompleft{0/1,1/0}{\scriptstyle \scriptvar_1\setminus\varepsilon}{}{}{\scriptvar^\prime_1}
\end{equation*}
This is a complete decomposition of avoiders of \(m_1\). Now we
look at an avoider of \(m_2\), this time decomposition is around the leftmost point
\begin{equation*}
    \scriptvar_2 = \varepsilon \sqcup
    \decompleft{0/1,1/0}{\scriptvar^\prime_2}{}{}{\scriptvar_2}
\end{equation*}

Where \(\scriptvar^\prime_2\) is a permutation avoiding \(\perm{2,3,1}, m_2\)
and \(\textpattern{}{1}{0/0,0/1,1/1}\).
Again we use the same method of decomposition of a permutation in \(\scriptvar^\prime_2\)
\begin{equation*}
    \scriptvar^\prime_2 = \varepsilon \sqcup
    \decompleft{0/1,1/0}{\scriptvar^\prime_2}{}{}{\scriptstyle \scriptvar_2\setminus\varepsilon}
\end{equation*}
This gives us a generating function \(\var(x)\) satisfying
\begin{align}
    \var(x) &= 1 + x\var(x)\var^\prime(x) \label{eqn:Pgen}\\
    \var^\prime(x) &= 1 + x(\var(x)-1)\var^\prime(x)\label{eqn:PprimeGen}
\end{align}
Solving \EquationRef{eqn:PprimeGen} for \(\var^\prime(x)\) and substituting into
\EquationRef{eqn:Pgen} gives us that the generating function for
\(\var(x)\) satisfies
\begin{equation}
    \var(x) = x\var^2(x) - x(\var(x) - 1) + 1
\end{equation}
Evaluating \(\var(x)\) gives us the sequence
\begin{equation*}
    1, 1, 1, 2, 4, 9, 21, 51, 127, 323, 835,\dotsc \tag{\href{https://oeis.org/A001006}{OEIS: A001006 with offset 1}}
\end{equation*}
This is an offset of the Motzkin numbers.

\subsection{}
\nextvar
The following patterns are experimentally Wilf-equivalent up to length 10 in
\(\av{\perm{2,3,1}}\)
\begin{gather*}
        \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/1,1/2,2/2},
        \pattern{}{1,2}{0/1,0/2,1/0,1/1,1/2,2/0,2/2},
        \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/1,1/2,2/1},
        \pattern{}{2,1}{0/0,0/1,0/2,1/1,1/2,2/0,2/1},
        \pattern{}{2,1}{0/0,0/1,0/2,1/0,1/1,1/2,2/0},\\
        \pattern{}{1,2}{0/0,0/1,0/2,1/2,2/0,2/1,2/2},
        \pattern{}{1,2}{0/0,0/1,0/2,1/1,1/2,2/0,2/2},
        \pattern{}{1,2}{0/0,0/1,1/0,1/1,1/2,2/0,2/1},
        \pattern{}{1,2}{0/0,0/1,1/0,1/1,1/2,2/0,2/1}
\end{gather*}

In order to gain enumeration, consider decomposition of avoiders
of first pattern, \(\textpattern{}{2,1}{0/0,0/1,0/2,1/0,1/1,1/2,2/2}\), around
the maximum.
\begin{equation*}
    \scriptvar_1 = \varepsilon \sqcup
    \tikz{\filldraw (0,0) circle (3pt);}
    \sqcup
    \decompmax{0/1,1/0}{\mathcal{C\setminus\varepsilon}}{}{}{\mathcal{C}}
\end{equation*}

This gives us the following generating function
\begin{equation}
    \var(x) = 1 + x + xC(x)(C(x)-1) \label{eq:qgen}
\end{equation}

Now we consider decomposition of an avoider of the second pattern,
\textpattern{}{1,2}{0/1,0/2,1/0,1/1,1/2,2/0,2/2},  in \(\av{231}\) around the maximum.
This avoider has form
\begin{equation*}
    \scriptvar_2 = \varepsilon \sqcup
    \decompmax{0/1,1/0}{\mathcal{\varmaxl}_2}{}{}{\mathcal{C}}
\end{equation*}
Where \(\mathcal{\varmaxl}_2 = \av{231,\textpattern{}{1}{0/1,1/0,1/1}}\).
This gives us the generating function
\begin{equation*}
    \begin{aligned}
        \var_2(x) &= 1+xC(x)\varmaxl(x)\\
        &= 1+xC(x)(1+xC(x)(C(x)-1))\\
        &= 1 +xC(x)(C(x)-xC(x)) && C(x) = 1+xC^2(x)\\
        &= 1 +x + xC^2(x) - xC(x) \\
        &= 1 +x + xC(x)(C(x)-1)
    \end{aligned}
\end{equation*}
Therefore this generating function is the same as \EquationRef{eq:qgen}.
We can decompose
\textpattern{}{2,1}{0/0,0/1,0/2,1/0,1/1,1/2,2/1},
\textpattern{}{2,1}{0/0,0/1,0/2,1/1,1/2,2/0,2/1},
\textpattern{}{2,1}{0/0,0/1,0/2,1/0,1/1,1/2,2/0},
\textpattern{}{1,2}{0/0,0/1,0/2,1/2,2/0,2/1,2/2},
and \textpattern{}{1,2}{0/0,0/1,0/2,1/1,1/2,2/0,2/2} around the leftmost point
into an avoider of one of the patterns with generating function \(\varmaxl(x)\) and
an avoider of \(\perm{2,3,1}\).

Now decompose an avoider of \textpattern{}{1,2}{0/0,0/1,1/0,1/1,1/2,2/0,2/1}
around the leftmost point.
\begin{equation*}
    \scriptvar_3 = \varepsilon \sqcup
    \decompleft{0/1,1/0}{\scriptstyle \scriptvar_3\setminus\varepsilon}{}{}{\mathcal{C}}
    \sqcup \decompleft{0/0,0/1,1/0}{}{}{}{\varmaxl_3}
\end{equation*}
Where \(\mathcal{\varmaxl}_3 = \av{231,\textpattern{}{1}{0/0,0/1,1/0}}\).
This gives generating function \(\var_3(x)\) satisfying
\begin{equation*}
    \begin{aligned}
        \var_3(x) &= 1 +xC(x)(\var_3(x)-1) + x\varmaxl(x)\\
        &= C(x) - xC^2(x) + xC(x) +x^2C^3(x) - x^2C^2 && \text{Solving for \(\var_3(x)\)}\\
        &= 1 + xC(x) +x^2C^3(x)-xC^2(x) && C = 1+xC^2(x)\\
        &= 1 + x + x^2C^3(x) && xC^2(x) = C(x)-1\\
        &= 1 + x + xC(x)(C(x)-1)
    \end{aligned}
\end{equation*}
This is equivalent to \EquationRef{eq:qgen}, and therefore these patterns are Wilf-equivalent.
The classes have enumeration
\begin{equation*}
    1, 1, 1, 3, 9, 28, 90, 297, 1001, 3432, 11934,\dotsc \tag{\href{https://oeis.org/A071724}{OEIS: A071724 with offset}}
\end{equation*}
